import{jsx as g}from"@dropins/tools/preact-jsx-runtime.js";import"@dropins/tools/event-bus.js";import{o as F,p as B,q as b,m as h}from"../chunks/fixtures.js";import{A as v}from"../chunks/getMultilineValues.js";import{s as y}from"../chunks/setBillingAddress.js";import{p as C}from"../chunks/setShippingAddress.js";import{A as S}from"../chunks/ShippingMethods.js";import"@dropins/tools/preact-hooks.js";import"@dropins/tools/lib.js";import{c as I}from"../chunks/BillToShippingAddress.js";import{w as _}from"../chunks/withConditionalRendering.js";import{useRef as k,useMemo as L,useCallback as N,useEffect as R}from"@dropins/tools/preact-compat.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/transform-shipping-methods.js";import"../chunks/getCart.graphql.js";import"@dropins/tools/i18n.js";import"@dropins/tools/components.js";/* empty css                              *//* empty css                   */const f=u=>{var p;const l=k(null),e=F.value.data,o=B.value.data,d=o==null?void 0:o.defaultBillingAddress,s=b.value.data,t=s==null?void 0:s.billingAddress,a=(p=s==null?void 0:s.shippingAddresses)==null?void 0:p[0],{checked:r,setByUser:m}=h.value,n=!r,c=L(()=>!e||!n?!1:t?!I(e,t,a):!!d,[n,e,t,a,d]),A=N(i=>y({signal:i.signal,input:{address:r?void 0:C(i.address),same_as_shipping:r}}),[r]);return R(()=>{if(!m)return;const i=new AbortController;return r||l.current.triggerSaveAddress(i.signal),()=>{i.abort()}},[r,m]),g("div",{children:g(S,{...u,addressType:v.BILLING,autoFill:c,"data-testid":"billing-form",headingId:"Checkout.BillingAddress.title",name:w,ref:l,saveAddressHandler:A,style:{display:n?"block":"none"}})})};f.displayName="BillingFormContainer";const Z=_(f),w="billing_address";export{w as BILLING_FORM_NAME,Z as BillingForm,Z as default};
