import{jsx as t,jsxs as n}from"@dropins/tools/preact-jsx-runtime.js";import"@dropins/tools/event-bus.js";import{n as i}from"../chunks/fixtures.js";import{a as u}from"../chunks/getCustomer.js";import"../chunks/ShippingMethods.js";import{useEffect as p}from"@dropins/tools/preact-hooks.js";import{classes as s}from"@dropins/tools/lib.js";import{IllustratedMessage as l,Icon as d,Button as h}from"@dropins/tools/components.js";/* empty css                              *//* empty css                   */import{S as v}from"../chunks/OrderError.js";import{useText as k}from"@dropins/tools/i18n.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";import"../chunks/getCart.graphql.js";import"../chunks/transform-shipping-methods.js";import"../chunks/getMultilineValues.js";import"@dropins/tools/preact-compat.js";const f=({className:r,errorMessage:e,contactSupport:a,...c})=>{const{onClick:m}=c,o=k({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"});return t(l,{"aria-invalid":"true","aria-describedby":"checkout-server-error__message","aria-live":"polite",className:s(["checkout-server-error",r]),"data-testid":"checkout-server-error",heading:e??o.Title,message:n("p",{id:s(["checkout-server-error__message"]),children:[o.Message,t("br",{}),t("span",{children:a??o.ContactSupport})]}),icon:t(d,{className:s(["checkout-server-error__icon"]),source:v}),action:t(h,{className:s(["checkout-server-error__button"]),onClick:m,children:o.Button})})},$=({onServerError:r})=>{const e=i.value,a=async()=>{i.value=void 0,await u()};return p(()=>{e&&(r==null||r())},[e,r]),e?t(f,{errorMessage:e,onClick:a}):null};export{$ as ServerError,$ as default};
