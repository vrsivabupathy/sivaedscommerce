import{jsx as A,jsxs as N}from"@dropins/tools/preact-jsx-runtime.js";import{useState as O,useEffect as Q,useMemo as S}from"@dropins/tools/preact-compat.js";import{Image as C}from"@dropins/tools/components.js";import{events as F}from"@dropins/tools/event-bus.js";import{g as q}from"../chunks/getFetchedProductData.js";import{Z as z,C as E,O as J}from"../chunks/Zoom.js";import"@dropins/tools/lib.js";/* empty css             */import{useText as K}from"@dropins/tools/i18n.js";import"@dropins/tools/preact.js";const U=({initialData:R=null,controls:Z="dots",loopable:g=!0,peak:j=!1,gap:G=null,arrows:T=!0,zoom:h=!1,imageParams:t,thumbnailParams:o,children:V,...k})=>{var u,w,B,y,I,_,x;const c=K("PDP.Product.Image.label").label,[e,v]=O(R),[d,s]=O(null);Q(()=>{const l=F.on("pdp/data",v);return()=>{l==null||l.off()}},[]);const f=S(()=>{var l;return((l=e==null?void 0:e.images)==null?void 0:l.map(({label:n,url:r},p)=>{const i=({...M})=>{var D;return A(C,{title:n,src:r,alt:c==null?void 0:c.replace("{product}",n).replace("{key}",String(p+1)).replace("{total}",String((D=e==null?void 0:e.images)==null?void 0:D.length)),width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,params:t??{width:960},loading:p===0?"eager":"lazy",...M})};return h?A(z,{closeButton:typeof h=="object"?h.closeButton:!1,children:A(i,{})},r):A(i,{onClick:()=>s(p)},r)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__images__placeholder",width:(t==null?void 0:t.width)??960,height:(t==null?void 0:t.height)??1191,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,t,h]),H=S(()=>{var l;return((l=e==null?void 0:e.images)==null?void 0:l.map(({label:n,url:r},p)=>{var i;return A(C,{title:n,src:r,alt:c==null?void 0:c.replace("{product}",n).replace("{key}",String(p+1)).replace("{total}",String((i=e==null?void 0:e.images)==null?void 0:i.length)),width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,params:o??{width:200},loading:"lazy"},r)}))??A("img",{src:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",className:"pdp-product-gallery__thumbnail__placeholder",width:(o==null?void 0:o.width)??200,height:(o==null?void 0:o.height)??248,"aria-hidden":!0},"pleaceholder")},[c,e==null?void 0:e.images,o]);return e?N("div",{...k,children:[A(E,{arrows:!!((u=e==null?void 0:e.images)!=null&&u.length),arrowsOnMainImage:T,controls:(w=e==null?void 0:e.images)!=null&&w.length?Z:"dots",loop:g&&!!((B=e.images)!=null&&B.length),peak:!!((y=e==null?void 0:e.images)!=null&&y.length)&&j,gap:G,defaultIndex:d||0,thumbnails:H,children:f}),d===null?null:A(J,{onClose:()=>s(null),centered:!0,children:A(E,{arrows:!!((I=e==null?void 0:e.images)!=null&&I.length),width:"100%",height:"100%",defaultIndex:d||0,loop:g&&!!((_=e.images)!=null&&_.length),controls:(x=e==null?void 0:e.images)!=null&&x.length?"dots":null,isZoomed:!0,children:f})})]}):null};U.getInitialData=q;export{U as ProductGallery,U as default};
