import{jsx as h,jsxs as E,Fragment as b}from"@dropins/tools/preact-jsx-runtime.js";import{Price as Y,CartItem as C,Icon as P,Image as I}from"@dropins/tools/components.js";import{useCallback as u}from"@dropins/tools/preact-hooks.js";import{classes as T}from"@dropins/tools/lib.js";import*as S from"@dropins/tools/preact-compat.js";const o=w=>S.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...w},S.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),S.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),p=({loading:w,product:e,itemType:R,taxConfig:A,translations:m,showConfigurableOptions:i,onQuantity:G})=>{var _,H,M,Z,j,D,O,W,$,f,q,x,z,B,F,K;const{taxExcluded:N,taxIncluded:Q}=A,t=u((v,U,X)=>h(Y,{amount:v,currency:U,weight:"normal",...X}),[]);let k={};const L=R==="cancelled",J=(H=(_=e==null?void 0:e.product)==null?void 0:_.stockStatus)==null?void 0:H.includes("IN_STOCK"),l=(e==null?void 0:e.giftCard)||{},s=(M=e==null?void 0:e.itemPrices)==null?void 0:M.priceIncludingTax,a=(Z=e==null?void 0:e.itemPrices)==null?void 0:Z.originalPrice,n=(j=e==null?void 0:e.itemPrices)==null?void 0:j.price,y=e.discounted&&((D=e.price)==null?void 0:D.value)!==(a==null?void 0:a.value)*(e==null?void 0:e.totalQuantity),V={..."configurableOptions"in e?e.configurableOptions:{},..."bundleOptions"in e?e.bundleOptions:{},..."senderName"in l&&(l!=null&&l.senderName)?{[m.sender]:l==null?void 0:l.senderName}:{},..."senderEmail"in l&&(l!=null&&l.senderEmail)?{[m.sender]:l==null?void 0:l.senderEmail}:{},..."recipientName"in l&&(l!=null&&l.recipientName)?{[m.recipient]:l==null?void 0:l.recipientName}:{},..."recipientEmail"in l&&(l!=null&&l.recipientEmail)?{[m.recipient]:l==null?void 0:l.recipientEmail}:{},..."message"in l&&(l!=null&&l.message)?{[m.message]:l==null?void 0:l.message}:{},..."downloadableLinks"in e&&(e!=null&&e.downloadableLinks)?{[`${(O=e==null?void 0:e.downloadableLinks)==null?void 0:O.count} ${m.downloadableCount}`]:(W=e==null?void 0:e.downloadableLinks)==null?void 0:W.result}:{}};if(Q&&N){const v=y?a==null?void 0:a.value:(s==null?void 0:s.value)*(e==null?void 0:e.totalQuantity);k={taxExcluded:!0,taxIncluded:void 0,price:t(a==null?void 0:a.value,a==null?void 0:a.currency),total:E(b,{children:[t(v,a==null?void 0:a.currency,{variant:e.discounted&&(s==null?void 0:s.value)!==v?"strikethrough":"default"}),e.discounted&&(s==null?void 0:s.value)!==v?t(s==null?void 0:s.value,s==null?void 0:s.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((n==null?void 0:n.value)*e.totalQuantity,n==null?void 0:n.currency)}}else if(!Q&&N)k={taxExcluded:void 0,taxIncluded:void 0,price:t(a==null?void 0:a.value,a==null?void 0:a.currency),total:E(b,{children:[t((a==null?void 0:a.value)*(e==null?void 0:e.totalQuantity),s==null?void 0:s.currency,{variant:y?"strikethrough":"default"}),y?t(($=e.price)==null?void 0:$.value,(f=e.price)==null?void 0:f.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((n==null?void 0:n.value)*(e==null?void 0:e.totalQuantity),n==null?void 0:n.currency)};else if(Q&&!N){const v=y?a.value:s.value*e.totalQuantity;k={taxExcluded:void 0,taxIncluded:!0,price:t(s==null?void 0:s.value,s==null?void 0:s.currency),total:E(b,{children:[t(v,s==null?void 0:s.currency,{variant:y?"strikethrough":"default",weight:"bold"}),y?t(s==null?void 0:s.value,s==null?void 0:s.currency,{sale:!0,weight:"bold"}):null]})}}return h(C,{loading:w,alert:L&&J?E("span",{children:[h(P,{source:o}),m.outOfStock]}):h(b,{}),configurations:(i==null?void 0:i(V))??V,title:h("div",{"data-testid":"product-name",className:T(["cart-summary-item__title",["cart-summary-item__title--strikethrough",L]]),children:(q=e==null?void 0:e.product)==null?void 0:q.name}),sku:h("div",{children:(x=e==null?void 0:e.product)==null?void 0:x.sku}),quantity:e.totalQuantity,image:h(I,{src:((B=(z=e==null?void 0:e.product)==null?void 0:z.thumbnail)==null?void 0:B.url)??"",alt:(K=(F=e==null?void 0:e.product)==null?void 0:F.thumbnail)==null?void 0:K.label,loading:"lazy",width:"90",height:"120"}),...k,onQuantity:G})};export{p as C,o as S};
