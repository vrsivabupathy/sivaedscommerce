/*! Copyright 2024 Adobe
All Rights Reserved. */
import{jsx as n,jsxs as w,Fragment as S}from"@dropins/tools/preact-jsx-runtime.js";import{Price as u,CartItem as o,Icon as r,Image as U,Incrementer as c}from"@dropins/tools/components.js";import{useCallback as d}from"@dropins/tools/preact-hooks.js";import{classes as X}from"@dropins/tools/lib.js";import{O as p}from"./OrderLoaders.js";import*as Q from"@dropins/tools/preact-compat.js";const ee=_=>Q.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",..._},Q.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M0.75 12C0.75 5.78421 5.78421 0.75 12 0.75C18.2158 0.75 23.25 5.78421 23.25 12C23.25 18.2158 18.2158 23.25 12 23.25C5.78421 23.25 0.75 18.2158 0.75 12Z",stroke:"currentColor"}),Q.createElement("path",{vectorEffect:"non-scaling-stroke",d:"M11.75 5.88423V4.75H12.25V5.88423L12.0485 13.0713H11.9515L11.75 5.88423ZM11.7994 18.25V16.9868H12.2253V18.25H11.7994Z",stroke:"currentColor"})),te=({loading:_,product:e,itemType:Y,taxConfig:D,translations:v,disabledIncrementer:C,onQuantity:k,showConfigurableOptions:N,routeProductDetails:E})=>{var M,Z,j,q,x,z,O,W,$,i,B,F,K,R,A,G,J;const{taxExcluded:V,taxIncluded:f}=D,t=d((h,T,g)=>n(u,{amount:h,currency:T,weight:"normal",...g}),[]);if(!e)return n(p,{});let b={};const L=Y==="cancelled",I=(Z=(M=e==null?void 0:e.product)==null?void 0:M.stockStatus)==null?void 0:Z.includes("IN_STOCK"),a=e==null?void 0:e.giftCard,l=(j=e==null?void 0:e.itemPrices)==null?void 0:j.priceIncludingTax,s=(q=e==null?void 0:e.itemPrices)==null?void 0:q.originalPrice,m=(x=e==null?void 0:e.itemPrices)==null?void 0:x.price,P=e.totalQuantity>1?{quantity:e.totalQuantity}:{},y=e.discounted&&((z=e.price)==null?void 0:z.value)!==(s==null?void 0:s.value)*(e==null?void 0:e.totalQuantity),H={...(e==null?void 0:e.configurableOptions)||{},...(e==null?void 0:e.bundleOptions)||{},...a!=null&&a.senderName?{[v.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.senderEmail?{[v.sender]:a==null?void 0:a.senderEmail}:{},...a!=null&&a.senderName?{[v.sender]:a==null?void 0:a.senderName}:{},...a!=null&&a.recipientEmail?{[v.recipient]:a==null?void 0:a.recipientEmail}:{},...a!=null&&a.message?{[v.message]:a==null?void 0:a.message}:{},...e!=null&&e.downloadableLinks?{[`${(O=e==null?void 0:e.downloadableLinks)==null?void 0:O.count} ${v.downloadableCount}`]:(W=e==null?void 0:e.downloadableLinks)==null?void 0:W.result}:{}};if(f&&V){const h=y?s==null?void 0:s.value:(l==null?void 0:l.value)*(e==null?void 0:e.totalQuantity);b={taxExcluded:!0,taxIncluded:void 0,price:t(s==null?void 0:s.value,s==null?void 0:s.currency),total:w(S,{children:[t(h,s==null?void 0:s.currency,{variant:e.discounted&&(l==null?void 0:l.value)!==h?"strikethrough":"default"}),e.discounted&&(l==null?void 0:l.value)!==h?t(l==null?void 0:l.value,l==null?void 0:l.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((m==null?void 0:m.value)*e.totalQuantity,m==null?void 0:m.currency)}}else if(!f&&V)b={taxExcluded:void 0,taxIncluded:void 0,price:t(s==null?void 0:s.value,s==null?void 0:s.currency),total:w(S,{children:[t((s==null?void 0:s.value)*(e==null?void 0:e.totalQuantity),l==null?void 0:l.currency,{variant:y?"strikethrough":"default"}),y?t(($=e.price)==null?void 0:$.value,(i=e.price)==null?void 0:i.currency,{sale:!0,weight:"bold"}):null]}),totalExcludingTax:t((m==null?void 0:m.value)*(e==null?void 0:e.totalQuantity),m==null?void 0:m.currency)};else if(f&&!V){const h=y?s.value:l.value*e.totalQuantity;b={taxExcluded:void 0,taxIncluded:!0,price:t(l==null?void 0:l.value,l==null?void 0:l.currency),total:w(S,{children:[t(h,l==null?void 0:l.currency,{variant:y?"strikethrough":"default",weight:"bold"}),y?t(l==null?void 0:l.value,l==null?void 0:l.currency,{sale:!0,weight:"bold"}):null]})}}return n(o,{loading:_,alert:L&&I?w("span",{children:[n(r,{source:ee}),v.outOfStock]}):n(S,{}),configurations:(N==null?void 0:N(H))??H,title:E?n("a",{"data-testid":"product-name",className:X(["cart-summary-item__title",["cart-summary-item__title--strikethrough",L]]),href:E(e),children:(B=e==null?void 0:e.product)==null?void 0:B.name}):n("div",{"data-testid":"product-name",className:X(["cart-summary-item__title",["cart-summary-item__title--strikethrough",L]]),children:(F=e==null?void 0:e.product)==null?void 0:F.name}),sku:n("div",{children:(K=e==null?void 0:e.product)==null?void 0:K.sku}),...P,image:E?n("a",{href:E(e),children:n(U,{src:(R=e==null?void 0:e.product)==null?void 0:R.thumbnail.url,alt:(A=e==null?void 0:e.product)==null?void 0:A.thumbnail.label,loading:"lazy",width:"90",height:"120"})}):n(U,{src:(G=e==null?void 0:e.product)==null?void 0:G.thumbnail.url,alt:(J=e==null?void 0:e.product)==null?void 0:J.thumbnail.label,loading:"lazy",width:"90",height:"120"}),...b,footer:k&&!C?n(c,{value:1,min:1,max:e==null?void 0:e.totalQuantity,onValue:h=>k==null?void 0:k(Number(h)),name:"quantity","data-testid":"returnIncrementer",readonly:!0}):void 0})};export{te as C,ee as S};
